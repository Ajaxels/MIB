
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Background Removal Panel</title><meta name="generator" content="MATLAB 9.0"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2016-11-04"><meta name="DC.source" content="ug_panel_bg_removal.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Background Removal Panel</h1><!--introduction--><p>The background removal panel is one of the left interchangeable panels, it provides three different algorithms for background removal. The image has to be as white objects on dark background (use <tt>Invert image</tt> command in the <a href="ug_gui_menu_image.html">Image menu</a>). These tools were designed to work with 2D time lapse movies obtained with light microscopy.</p><p><b>Back to</b> <a href="im_browser_product_page.html"><b>Index</b></a> <tt><b>--&gt;</b></tt> <a href="im_browser_user_guide.html"><b>User Guide</b></a> <tt><b>--&gt;</b></tt> <a href="ug_gui_panels.html"><b>Panels</b></a></p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#2">General notes on usage</a></li><li><a href="#3">Morphological opening and background removal</a></li><li><a href="#4">Background approximation based on local minima</a></li><li><a href="#5">Estimation of background as a gaussian blured image</a></li></ul></div><p><img vspace="5" hspace="5" src="images\16_panel_bg_remove_morph.jpg" alt=""> </p><h2>General notes on usage<a name="2"></a></h2><div><ul><li>Start filtering by pressing the <tt>Remove</tt> button.</li><li>Check the <tt>Test</tt> checkbox (<b>9.</b>) for the test run and press the <tt>Remove</tt> button.</li><li>Select the <tt>All</tt> checkbox (<b>8.</b>) to subtract background from all images in the dataset.</li></ul></div><h2>Morphological opening and background removal<a name="3"></a></h2><p>Select the <tt>Morph opening</tt> checkbox (<b>1.</b>) to select this method.</p><p>Original image:</p><p><img vspace="5" hspace="5" src="images\Background_orig.jpg" alt=""> </p><p><b>How it works:</b></p><p><b>1.</b> Generate <b>background image</b> by opening the image with <tt>imopen</tt> function and strel size defined in the <tt>Strel size</tt> editbox (<b>4.</b>). This would remove all objects smaller than the strel size from the background image. Use high values in the <tt>Strel size</tt> editbox.</p><p>Background to be subtracted</p><p><img vspace="5" hspace="5" src="images\Background_morph.jpg" alt=""> </p><p><b>2.</b> If the <tt>Smoothing</tt> checkbox is <tt>ON</tt> (<b>3.</b>), the program filters the <b>background image</b> with gaussian filter with <tt>Size</tt> and <tt>Sigma</tt> parameters (<b>6.</b>).</p><p>Smoothed background</p><p><img vspace="5" hspace="5" src="images\Background_morph_smooth.jpg" alt=""> </p><p><b>3.</b> Subtract the <b>background image</b> from the current image.</p><p>Result of background subtraction</p><p><img vspace="5" hspace="5" src="images\Background_morph_result.jpg" alt=""> </p><p><b>4.</b> Show profiles for the specified line, if <b>7.</b> is checked.</p><h2>Background approximation based on local minima<a name="4"></a></h2><p>This method uses <tt>extrema</tt> and <tt>extrema2</tt> functions written by <a href="http://www.mathworks.com/matlabcentral/fileexchange/12275-extrema-m-extrema2-m">Carlos Adrian Vargas Aguilera</a> from Universidad de Guadalajara, Mexico. The method finds local minima and then generates background image using the amplitudes at the local minima. Select the <tt>Minima</tt> checkbox (<b>2.</b>) to select this method.</p><p><img vspace="5" hspace="5" src="images\16_panel_bg_remove_minima.jpg" alt=""> </p><p><b>How it works:</b></p><p><b>1.</b> Prefilter the image with Circular averaging filter (<tt>fspecial</tt> function with <tt>disk</tt> type, using size from the <tt>Strel size</tt> editbox (<b>4.</b>). Increase of the strel size parameter will reduce number of local minima.</p><p>Prefiltered image</p><p><img vspace="5" hspace="5" src="images\Background_minima_prefiltered.jpg" alt=""> </p><p><b>2.</b> Find local minima with <tt>extrema2</tt> function.</p><p><b>3.</b> Remove all local minima that are higher than the <tt>Max minima</tt> parameter (<b>5.</b>).</p><p><b>4.</b> Reconstruct the background image</p><p><img vspace="5" hspace="5" src="images\Background_minima_reconst.jpg" alt=""> </p><p><b>5.</b> Smoothen the backgound image if the <tt>Smoothing</tt> checkbox is selected</p><p><img vspace="5" hspace="5" src="images\Background_minima_reconst_sm.jpg" alt=""> </p><p><b>6.</b> Generate averaged background image for the whole stack.</p><p><b>7.</b> Substract averaged background from each image in the stack. The local minina that were used for reconstruction are marked with crosses.</p><p><img vspace="5" hspace="5" src="images\Background_minima_result.jpg" alt=""> </p><h2>Estimation of background as a gaussian blured image<a name="5"></a></h2><p>When both <tt>Morph opening</tt> (<b>1.</b>) and <tt>Minima</tt> (<b>2.</b>) checkboxes are unchecked <tt>im_browser</tt> estimates background as a gaussian blured image. This is the easiest method from the computational point of view but may give rise of artifacts when the strel size is too small.</p><p><b>How it works:</b></p><p><b>1.</b> Generate <b>background image</b> by filtering of the image with a large <tt>Size</tt> parameter of the gaussian filter (<b>6.</b>).</p><p>Background to be subtracted, obtained with Size=120, Sigma=40.</p><p><img vspace="5" hspace="5" src="images\Background_gauss.jpg" alt=""> </p><p><b>2.</b> Subtract the <b>background image</b> from the current image.</p><p>Result of background subtraction</p><p><img vspace="5" hspace="5" src="images\Background_gauss_result.jpg" alt=""> </p><p><b>3.</b> Show profiles for the specified line, if <b>7.</b> is checked.</p><p><b>Back to</b> <a href="im_browser_product_page.html"><b>Index</b></a> <tt><b>--&gt;</b></tt> <a href="im_browser_user_guide.html"><b>User Guide</b></a> <tt><b>--&gt;</b></tt> <a href="ug_gui_panels.html"><b>Panels</b></a></p><p class="footer"><br><a href="http://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2016a</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Background Removal Panel
% The background removal panel is one of the left interchangeable panels, it provides three different algorithms for background removal. The image has to be as white
% objects on dark background (use |Invert image| command in the
% <ug_gui_menu_image.html Image menu>). These tools were designed to work with 2D time lapse movies obtained with light
% microscopy.
%
% *Back to* <im_browser_product_page.html *Index*> |*REPLACE_WITH_DASH_DASH>*| <im_browser_user_guide.html *User Guide*> |*REPLACE_WITH_DASH_DASH>*| <ug_gui_panels.html *Panels*>
%%
%
% <<images\16_panel_bg_remove_morph.jpg>>
%% General notes on usage
%
% * Start filtering by pressing the |Remove| button.
% * Check the |Test| checkbox (*9.*) for the test run and press the |Remove| button. 
% * Select the |All| checkbox (*8.*) to subtract background from all images
% in the dataset.
%% Morphological opening and background removal
% Select the |Morph opening| checkbox (*1.*) to select this method.
%
% Original image:
% 
% <<images\Background_orig.jpg>>
% 
% *How it works:*
%
% *1.* Generate *background image* by opening the image with |imopen| function 
% and strel size defined in the |Strel size| editbox (*4.*). 
% This would remove all objects smaller than the strel size from the
% background image. Use high values in the |Strel size| editbox.
% 
% Background to be subtracted
% 
% <<images\Background_morph.jpg>>
%
% *2.* If the |Smoothing| checkbox is |ON| (*3.*), the program filters the *background image* with
% gaussian filter with |Size| and |Sigma| parameters (*6.*).
%
% Smoothed background
%
% <<images\Background_morph_smooth.jpg>>
%
% *3.* Subtract the *background image* from the current image.
%
% Result of background subtraction
%
% <<images\Background_morph_result.jpg>>
%
% *4.* Show profiles for the specified line, if *7.* is checked.
%
%% Background approximation based on local minima 
% This method uses |extrema| and |extrema2| functions written by 
% <http://www.mathworks.com/matlabcentral/fileexchange/12275-extrema-m-extrema2-m Carlos Adrian Vargas Aguilera> 
% from Universidad de Guadalajara, Mexico. The method finds local minima
% and then generates background image using the amplitudes at the local
% minima. Select the |Minima| checkbox (*2.*) to select this method.
%
% <<images\16_panel_bg_remove_minima.jpg>>
%
% *How it works:*
% 
% *1.* Prefilter the image with Circular averaging filter (|fspecial|
% function with |disk| type, using size from the |Strel size| editbox
% (*4.*). Increase of the strel size parameter will reduce number of local
% minima.
%
% Prefiltered image
%
% <<images\Background_minima_prefiltered.jpg>>
% 
% *2.* Find local minima with |extrema2| function.
%
% *3.* Remove all local minima that are higher than the |Max minima|
% parameter (*5.*).
%
% *4.* Reconstruct the background image
%
% <<images\Background_minima_reconst.jpg>>
%
% *5.* Smoothen the backgound image if the |Smoothing| checkbox is selected
%
% <<images\Background_minima_reconst_sm.jpg>>
%
% *6.* Generate averaged background image for the whole stack.
%
% *7.* Substract averaged background from each image in the stack. The
% local minina that were used for reconstruction are marked with crosses.
%
% <<images\Background_minima_result.jpg>>
%
%% Estimation of background as a gaussian blured image
% When both |Morph opening| (*1.*) and |Minima| (*2.*) checkboxes are unchecked
% |im_browser| estimates background as a gaussian blured image. This is the
% easiest method from the computational point of view but may give rise of artifacts
% when the strel size is too small.
%
% *How it works:*
%
% *1.* Generate *background image* by filtering of the image with a large |Size|
% parameter of the gaussian filter (*6.*).
%
% Background to be subtracted, obtained with Size=120, Sigma=40.
%
% <<images\Background_gauss.jpg>>
%
% *2.* Subtract the *background image* from the current image.
%
% Result of background subtraction
%
% <<images\Background_gauss_result.jpg>>
%
% *3.* Show profiles for the specified line, if *7.* is checked.
%
%
%
% *Back to* <im_browser_product_page.html *Index*> |*REPLACE_WITH_DASH_DASH>*| <im_browser_user_guide.html *User Guide*> |*REPLACE_WITH_DASH_DASH>*| <ug_gui_panels.html *Panels*>
##### SOURCE END #####
--></body></html>